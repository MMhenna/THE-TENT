{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/mahdi/THE-TENT/components/main/Chat.js\";\n\nimport React, { useState, useEffect, useCallback, useLayoutEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Bubble, GiftedChat, Send } from \"react-native-gifted-chat\";\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport firebase from \"firebase\";\nvar auth = firebase.auth();\n\nvar ChatScreen = function ChatScreen() {\n  var _auth$currentUser, _auth$currentUser2, _auth$currentUser3;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      messages = _useState2[0],\n      setMessages = _useState2[1];\n\n  useEffect(function () {\n    setMessages([{\n      _id: 1,\n      text: \"Hello developer\",\n      createdAt: new Date(),\n      user: {\n        _id: 2,\n        name: \"React Native\",\n        avatar: \"https://placeimg.com/140/140/any\"\n      }\n    }, {\n      _id: 2,\n      text: \"Hello world\",\n      createdAt: new Date(),\n      user: {\n        _id: 1,\n        name: \"React Native\",\n        avatar: \"https://placeimg.com/140/140/any\"\n      }\n    }]);\n  }, []);\n  useLayoutEffect(function () {\n    var unsubscribe = firebase.firestore().collection(\"chats\").orderBy(\"createdAt\", \"desc\").onSnapshot(function (snapshot) {\n      return setMessages(snapshot.docs.maps(function (doc) {\n        return {\n          _id: doc.data()._id,\n          createdAt: doc.data().createdAt.toDate(),\n          text: doc.data().text,\n          user: doc.data().user\n        };\n      }));\n    });\n  });\n\n  var _onSend = useCallback(function () {\n    var messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    setMessages(function (previousMessages) {\n      return GiftedChat.append(previousMessages, messages);\n    });\n    var _messages$ = messages[0],\n        _id = _messages$._id,\n        createdAt = _messages$.createdAt,\n        text = _messages$.text,\n        user = _messages$.user;\n    firebase.firestore().collection(\"chats\").add({\n      _id: _id,\n      createdAt: createdAt,\n      text: text,\n      user: user\n    });\n  }, []);\n\n  var renderSend = function renderSend(props) {\n    return React.createElement(Send, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }), React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, React.createElement(MaterialCommunityIcons, {\n      name: \"send-circle\",\n      style: {\n        marginBottom: 5,\n        marginRight: 5\n      },\n      size: 32,\n      color: \"#2e64e5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  var renderBubble = function renderBubble(props) {\n    return React.createElement(Bubble, _extends({}, props, {\n      wrapperStyle: {\n        right: {\n          backgroundColor: \"#2e64e5\"\n        }\n      },\n      textStyle: {\n        right: {\n          color: \"#fff\"\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  var scrollToBottomComponent = function scrollToBottomComponent() {\n    return React.createElement(FontAwesome, {\n      name: \"angle-double-down\",\n      size: 22,\n      color: \"#333\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 12\n      }\n    });\n  };\n\n  return React.createElement(GiftedChat, {\n    messages: messages,\n    onSend: function onSend(messages) {\n      return _onSend(messages);\n    },\n    user: {\n      _id: auth == null ? void 0 : (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.email,\n      name: auth == null ? void 0 : (_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.name,\n      avatar: auth == null ? void 0 : (_auth$currentUser3 = auth.currentUser) == null ? void 0 : _auth$currentUser3.photoURL\n    },\n    renderBubble: renderBubble,\n    alwaysShowSend: true,\n    renderSend: renderSend,\n    scrollToBottom: true,\n    scrollToBottomComponent: scrollToBottomComponent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default ChatScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"sources":["/home/mahdi/THE-TENT/components/main/Chat.js"],"names":["React","useState","useEffect","useCallback","useLayoutEffect","Bubble","GiftedChat","Send","MaterialCommunityIcons","FontAwesome","firebase","auth","ChatScreen","messages","setMessages","_id","text","createdAt","Date","user","name","avatar","unsubscribe","firestore","collection","orderBy","onSnapshot","snapshot","docs","maps","doc","data","toDate","onSend","previousMessages","append","add","renderSend","props","marginBottom","marginRight","renderBubble","right","backgroundColor","color","scrollToBottomComponent","currentUser","email","photoURL","styles","StyleSheet","create","container","flex","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useEffect,\n  useCallback,\n  useLayoutEffect,\n} from \"react\";\nimport { View, ScrollView, Text, Button, StyleSheet } from \"react-native\";\nimport { Bubble, GiftedChat, Send } from \"react-native-gifted-chat\";\nimport MaterialCommunityIcons from \"react-native-vector-icons/MaterialCommunityIcons\";\nimport FontAwesome from \"react-native-vector-icons/FontAwesome\";\nimport firebase from \"firebase\";\n\nconst auth = firebase.auth();\n\nconst ChatScreen = () => {\n  const [messages, setMessages] = useState([]);\n\n  useEffect(() => {\n    setMessages([\n      {\n        _id: 1,\n        text: \"Hello developer\",\n        createdAt: new Date(),\n        user: {\n          _id: 2,\n          name: \"React Native\",\n          avatar: \"https://placeimg.com/140/140/any\",\n        },\n      },\n      {\n        _id: 2,\n        text: \"Hello world\",\n        createdAt: new Date(),\n        user: {\n          _id: 1,\n          name: \"React Native\",\n          avatar: \"https://placeimg.com/140/140/any\",\n        },\n      },\n    ]);\n  }, []);\n\n  useLayoutEffect(() => {\n    const unsubscribe = firebase\n      .firestore()\n      .collection(\"chats\")\n      .orderBy(\"createdAt\", \"desc\")\n      .onSnapshot((snapshot) =>\n        setMessages(\n          snapshot.docs.maps((doc) => ({\n            _id: doc.data()._id,\n            createdAt: doc.data().createdAt.toDate(),\n            text: doc.data().text,\n            user: doc.data().user,\n          }))\n        )\n      );\n  });\n\n  const onSend = useCallback((messages = []) => {\n    setMessages((previousMessages) =>\n      GiftedChat.append(previousMessages, messages)\n    );\n    const { _id, createdAt, text, user } = messages[0];\n    firebase\n      .firestore()\n      .collection(\"chats\")\n      .add({ _id, createdAt, text, user });\n  }, []);\n\n  const renderSend = (props) => {\n    return (\n      <Send {...props}>\n        <View>\n          <MaterialCommunityIcons\n            name=\"send-circle\"\n            style={{ marginBottom: 5, marginRight: 5 }}\n            size={32}\n            color=\"#2e64e5\"\n          />\n        </View>\n      </Send>\n    );\n  };\n\n  const renderBubble = (props) => {\n    return (\n      <Bubble\n        {...props}\n        wrapperStyle={{\n          right: {\n            backgroundColor: \"#2e64e5\",\n          },\n        }}\n        textStyle={{\n          right: {\n            color: \"#fff\",\n          },\n        }}\n      />\n    );\n  };\n\n  const scrollToBottomComponent = () => {\n    return <FontAwesome name=\"angle-double-down\" size={22} color=\"#333\" />;\n  };\n\n  return (\n    <GiftedChat\n      messages={messages}\n      onSend={(messages) => onSend(messages)}\n      user={{\n        _id: auth?.currentUser?.email,\n        name: auth?.currentUser?.name,\n        avatar: auth?.currentUser?.photoURL,\n      }}\n      renderBubble={renderBubble}\n      alwaysShowSend\n      renderSend={renderSend}\n      scrollToBottom\n      scrollToBottomComponent={scrollToBottomComponent}\n    />\n  );\n};\n\nexport default ChatScreen;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}